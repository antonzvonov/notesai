# Notesai

Простое веб-приложение на Spring Boot с приветственной страницей.

## Запуск

```
mvn spring-boot:run
```

После запуска откройте `http://localhost:8080` и увидите сообщение «Hello, World!».
На главной странице есть ссылка на страницу чата (`/chat`), где можно отправлять текстовые сообщения и текстовые файлы. Ответ сервера с содержимым файла будет отображаться на странице.

## Хранение эмбеддингов

В проект добавлен сервис `VectorService`, который работает через PostgreSQL. Схема базы данных управляется Liquibase, а сервис использует таблицы:

- `file_metadata` — хранит идентификатор проекта, название файла и его расширение.
- `file_chunks` — хранит текстовые фрагменты, связанные с файлом, и вектор типа `vector` из расширения **pgvector**.

Сервис предоставляет методы для сохранения метаданных (включая `project_id`) и фрагментов текста вместе с вектором. Поиск схожих фрагментов теперь выполняется на стороне базы данных с использованием оператора `<=>` из pgvector.

Расширение **pgvector** создаётся автоматически через Liquibase, но оно должно быть установлено в вашем PostgreSQL.

Для работы требуется настроенный PostgreSQL и параметры подключения в `application.properties`. Liquibase автоматически применит изменения схемы при старте приложения.
